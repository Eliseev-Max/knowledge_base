########
# curl #
########

**************************************************************
* [!]{"curl tutorial":https://curl.se/docs/tutorial.html}[!] *
* {"curl.1 the man page": https://curl.se/docs/manpage.html} *
**************************************************************
{"curl(1) - Linux man page":https://linux.die.net/man/1/curl}
{"HTTP API Curl (урок)":https://ru.hexlet.io/courses/http-api/lessons/curl/theory_unit}


curl - 
  - это инструмент для передачи данных с сервера или на сервер, используя один из поддерживаемых протоколов.
  - Это набор библиотек, в которых реализуются базовые возможности работы с URL страницами и передачи файлов.
Поддерживаемые протоколы:
	♦ HTTP,
	♦ HTTPS,
	♦ FTP,
	♦ FTPS,
	♦ SCP,
	♦ SFTP,
	♦ TFTP,
	♦ DICT,
	♦ TELNET,
	♦ LDAP
	♦ FILE

***********************************************
* Полезные возможности, предоставляемые curl: *
***********************************************
  • поддержка прокси,
  • аутентификация пользователя,
  • загрузка на FTP,
  • отправка HTTP,
  • SSL-соединения,
  • cookies,
  • возобновление передачи файлов  и пр.


*****************************
* Часто используемые опции: *
*****************************

  -f - не выводить сообщения об ошибках сервера
  -s - бесшумный или тихий режим. Не показывает счетчик прогресса или сообщения об ошибках.
  -S - выводить сообщения об ошибках;
  -L - принимать и обрабатывать перенаправления
  -o, --output <file> - записать вывод в <file> вместо STDOUT;
	  если используются {} или [] для получения нескольких документов, нужно заключить URL в кавычки,
	  а в спецификаторе <file> можно использовать '#', за которым следует число.
	  Эта переменная будет заменена текущей строкой для получаемого URL.
---
curl "http://{one,two}.example.com" -o "file_#1.txt"
---
  -O, --remote-name - записать вывод в локальный файл с именем, подобным имени удаленного файла, который мы получаем.
	  (Используется только файловая часть удаленного файла, путь отсекается).
	  (Имя удаленного файла, используемое для сохранения, извлекается из заданного URL, ничего больше)
      (Можно использовать эту опцию столько раз, сколько у нас URL)

Подробнее:
  -f, --fail
    В основном это делается для того, чтобы скрипты и т.д. могли лучше справляться с неудачными попытками.
	В обычных случаях, когда HTTP-серверу не удается доставить документ, он возвращает HTML-документ,
	сообщающий об этом (в котором часто также описывается причина и многое другое).
	Этот флаг не позволит curl вывести этот документ и вернет ошибку 22.
	Этот метод не является безотказным, и бывают случаи, когда не успешные коды ответа будут проскальзывать,
	особенно при аутентификации (коды ответа 401 и 407).

  -s, --silent
    Делает Curl беззвучным. 
	Он по-прежнему будет выводить данные, которые вы запрашиваете, возможно даже в терминал/stdout, если вы не перенаправите их.
	В сочетании с "-S, --show-error" отключает индикатор выполнения, но при этом показывает сообщения об ошибках.

  -L, --location
    (HTTP) Если сервер сообщает, что запрошенная страница переместилась в другое место (на это указывает заголовок Location:
	и кодом ответа 3XX), эта опция заставит curl повторить запрос на новом месте.
	Если используется вместе с "-i, --include" или "-I, --head", будут показаны заголовки всех запрошенных страниц.
	Когда используется аутентификация, curl отправляет свои учетные данные только на начальный хост.
	Если перенаправление приведет curl на другой хост, он не сможет перехватить пользователь+пароль.
	Вы можете ограничить количество перенаправлений с помощью опции --max-redirs.
	Когда curl следует за перенаправлением и если запрос является POST, он отправит следующий запрос с GET, если HTTP был 301, 302 или 303.
	Если код ответа был любым другим кодом 3xx, curl повторно пошлёт следующий запрос, используя тот же немодифицированный метод.
	Вы можете указать curl не менять POST-запросы на GET после ответа 30x, используя для этого специальные опции:
	--post301, --post302 и --post303. 
	Метод, установленный с помощью -X, --request, переопределяет метод, который curl в противном случае выбрал бы для использования

Аутентификация curl

	Если на сервере требуется аутентификация одного из распространенных типов, например, HTTP Basic или FTP,
	то curl очень просто может справиться с такой задачей.
	Для указания данных аутентификации просто укажите их через двоеточие в опции -u (--user)
	(получение файла с HTTP-сервера, который требует логин и пароль):
	Отменяет параметры -n/--netrc и --netrc-optional. 
	(-u/--user <user:password>)
		$ curl -u ftpuser:ftppass -T - ftp://ftp.testserver.com/myfile_1.txt
	
	Некоторые прокси-серверы требуют специальной аутентификации (параметр -U):
	-U/--proxy-user <user:password>
	Укажите имя пользователя и пароль, которые будут использоваться для аутентификации прокси.
	Если вы используете двоичный файл curl с поддержкой SSPI и выполняете аутентификацию NTLM,
	вы можете заставить curl взять имя пользователя и пароль из вашей среды, просто указав одно двоеточие с этой опцией:
	"-U :"
<На testserver сработал curl -U m.eliseev:***** -x 172.25.200.200:3128 https://prosoftsystems.ru/>
		
https://losst.ru/kak-polzovatsya-curl#%D0%90%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F_curl
https://www.opennet.ru/man.shtml?topic=curl&category=1&russian=3


***************
* Config file *
***************

  При запуске Curl АВТОМАТИЧЕСКИ пытается прочитать файл .curlrc (_curlrc в системах Microsoft Windows)
  из ДОМАШНЕГО КАТАЛОГА ПОЛЬЗОВАТЕЛЯ.

  Конфигурационный файл может быть составлен с помощью обычных переключателей командной строки (command line switches),
  но вы также можете указать длинные параметры без тире, чтобы сделать его более читабельным.

  Опции и параметры можно разделять пробелами, а также знаками `=` или `:`

##[Комментарии внутри config-файла:]
  Внутри файла можно использовать комментарии.
  Если первый символ в строке = #, остальная часть строки рассматривается как комментарий.

Если вы хотите, чтобы параметр содержал пробелы, вы должны заключить весь параметр в двойные кавычки (""). Внутри этих кавычек указывается кавычка \".

ПРИМЕЧАНИЕ: Параметры и их аргументы следует указывать в одной строке.

Например, установите тайм-аут и прокси по умолчанию в конфигурационном файле:
---<.curlrc>---
# We want a 30 minute timeout:
-m 1800
#. .. and we use a proxy for all accesses:
proxy = proxy.our.domain.com:8080
---

##[Пробельные символы:]
  Пробельные символы в конце строк значатся, но все пробельные символы до первых символов каждой строки игнорируются.

##[Запрет на чтение config-файла:]
# [-q]

  Запретите curl читать файл по умолчанию, используя -q в качестве первого параметра командной строки
  Например:
---
curl -q www.example.org
---

##[Указать другой config-файл:]
# [-K/--config]

  Если вы установите значение config filename в `-`, он будет читать конфигурацию из STDIN,
  что может быть удобно, если вы хотите скрыть опции от отображения в таблицах процессов и т.д.:
---
echo "user = user:passwd" | curl -K - http://that.secret.example.com
---