Встроенный модуль  Set

Эта встроенная функция (встроенный модуль) настолько сложна (сложен), что заслуживает отдельного раздела.

set позволяет:
  * изменять значения опций оболочки
  * задавать позиционные параметры
  * выводить имена и значения переменных оболочки.

---
set [-abefhkmnptuvxBCEHPT] [-o option-name] [--] [-] [argument …]
set [+abefhkmnptuvxBCEHPT] [+o option-name] [--] [-] [argument …]
---

Если опции или аргументы не указаны:
  -> set выводит имена и значения всех переменных и функций оболочки,
     отсортированные в соответствии с текущей локалью,
	 в формате, который можно использовать в качестве входных данных для установки или сброса текущих переменных.
	 Переменные, доступные только для чтения, не могут быть сброшены.
	 В режиме POSIX перечислены только переменные оболочки.

Если указаны опции, они устанавливают (+) или отменяют (-) атрибуты оболочки.

##########
# set -e #
##########
  Немедленный выход, если конвейер*, который может состоять из
  - одной простой команды**,
  - списка***
  - или составной команды****,
  возвращает ненулевой статус.

  Оболочка НЕ ЗАВЕРШАЕТ РАБОТУ, если неудачная команда является
    - частью списка команд, следующего сразу за ключевым словом while или until,
    - частью проверки в операторе if,
	- частью любой команды, выполняемой в списке && или ||, кроме команды, следующей за последней && или ||,
	- любой команды в конвейере, кроме последней,
	- или если статус возврата команды инвертируется с помощью !.
  Если составная команда, отличная от под-оболочки, возвращает ненулевой статус из-за того, что команда не выполнилась, пока -e игнорировался, оболочка не завершается.
  Ловушка на ERR, если она установлена, выполняется перед выходом оболочки.

# (*)    см. Pipelines: https://www.gnu.org/software/bash/manual/html_node/Pipelines.html
# (**)   см. Простые команды: https://www.gnu.org/software/bash/manual/html_node/Simple-Commands.html
# (***)  см. Списки команд: https://www.gnu.org/software/bash/manual/html_node/Lists.html
# (****) см. Составные команды: https://www.gnu.org/software/bash/manual/html_node/Compound-Commands.html
  

Эта опция применяется к окружению оболочки и каждому под-оболочке отдельно (см. раздел "Окружение выполнения команд") и может привести к выходу под-оболочек перед выполнением всех команд в под-оболочке.

Если составная команда или функция оболочки выполняется в контексте, в котором -e игнорируется, ни одна из команд, выполняемых внутри составной команды или тела функции, не будет затронута настройкой -e, даже если -e установлена, а команда возвращает статус отказа. Если составная команда или функция оболочки устанавливает значение -e при выполнении в контексте, в котором -e игнорируется, это значение не будет иметь никакого эффекта до тех пор, ПОКА
  - составная команда
  <или>
  - команда, содержащая вызов функции,
  НЕ ЗАВЕРШИТСЯ.

!!!!
https://stackoverflow.com/questions/19622198/what-does-set-e-mean-in-a-bash-script
!!!!

Использование '+', а не '-' приводит к отключению этих опций.
Опции также могут быть использованы при вызове оболочки.

Текущий набор опций можно найти в $-.
Остальные N аргументов являются позиционными параметрами и присваиваются по порядку:
  $1, $2, ... $N.
  Специальный параметр # устанавливается в N.

Статус возврата всегда равен нулю, если только не задана недопустимая опция.


[!] Некоторые считают (set -e) плохой практикой:
(авторы Bash FAQ и IRC Freenode #bash FAQ.
{"Why doesn't set -e (or set -o errexit, or trap ERR) do what I expected?"::https://mywiki.wooledge.org/BashFAQ/105}).

Рекомендуется использовать:

trap 'do_something' ERR
для запуска функции do_something при возникновении ошибок.
